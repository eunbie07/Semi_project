<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>smartphone_overdependence</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@100;200;300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="assets/logo.png" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_KEY&autoload=false&libraries=services"></script>
  <script defer src="stress_map.js"></script>
  <script defer src="weather.js"></script>
  <script defer src="bio.js"></script>
  <script defer src="section-scroll.js"></script>
  <script defer src="loadtest.js"></script>
  <script defer src="quiz_loader.js"></script>
  <script src="depression_compare.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
  
</head>

<body>
  <header>  
    <nav class="navbar">
      <div class="nav-inner">
        <div class="logo">
          <a href="homepage.html">
            <img src="assets/logo.png" alt="Logo" />
          </a>
        </div>
        <ul class="menu">

          <li><a href="#weather">Weather Sentiment Graph</a></li>
          <li><a href="#map">MAP</a></li>
          <li><a href="#test">Psychological Test</a></li>
          <li><a href="#depression">Melancholy</a></li>
          <li><a href="#scatter">Statistics</a></li>
          <li><a href="#quiz">Quiz</a></li>
          <li><a href="#bio">Biorthythm</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <section class="full-section home-hero bg-white">
    <div class="home-text">
      <h1>스마트폰 <br />과의존</h1>
      <p>손에서 놓지 못한 것들,<br> 우리의 마음도 놓치고 있습니다.</p>
    </div>
    <img src="assets/home.png" alt="Home_img" class="home-image" />
  </section>
  
  <section id="weather" class="full-section weather-page bg-gray">
    <h2>Depression & Weather</h2>
    <canvas id="weatherChart" width="800" height="300"></canvas>
    <p id="bestTimeMessage" class="message"></p>
    <p id="lightestMoodMessage" class="message"></p>
    <p id="heaviestMoodMessage" class="message"></p>
  </section>

  <section id="map" class="full-section home-hero bg-white">
    <iframe src="map.html" width="100%" height="600" style="border: none;" loading="lazy"></iframe>
  </section>
  
  <section id="test" class="full-section home-hero bg-white">
    <div id="test-intro">
      <h2>스마트폰 사용 자가진단</h2>
      <p>당신의 정서와 스마트폰은 얼마나 연결되어 있나요?</p>
      <div class="buttons">
        <button class="btn blue" onclick="loadTest()">테스트 하러가기</button>
      </div>
    </div>
    <div id="test-container"></div>
  </section>

  <section id="depression" class="full-section home-hero bg-gray">
    <div id="depression-container"></div>
  </section>

  <section id="scatter" class="full-section home-hero bg-white">
    <div id="scatter-container"></div>
  </section>

  <section id="quiz" class="full-section home-hero bg-gray" style="min-height: 100vh;">
    <div id="quiz-container"></div>
  </section>

  <section id="bio" class="full-section home-hero bg-white">
    <div id="bio-container"></div>
  </section>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      // bio.html 삽입
      fetch("bio.html")
        .then(res => res.text())
        .then(html => {
          document.getElementById("bio-container").innerHTML = html;
        });

      // depression.html 삽입
      fetch("depression.html")
        .then(res => res.text())
        .then(html => {
          document.getElementById("depression-container").innerHTML = html;

    // ✅ 스크립트 따로 로드
      const script = document.createElement("script");
      script.src = "depression_compare.js";
      document.body.appendChild(script);
    });

      // quiz_menu.html 삽입 후 이벤트 연결
      fetch("quiz_menu.html")
        .then(res => res.text())
        .then(html => {
          const quizContainer = document.getElementById("quiz-container");
          quizContainer.innerHTML = html;
          initQuizMenu(); // quiz_loader.js 함수 호출
        });

      // scatter.html 삽입
      fetch("scatter.html")
        .then(res => res.text())
        .then(html => {
          document.getElementById("scatter-container").innerHTML = html;
        });
    });

    // 전역에서 사용할 수 있도록 함수 노출
    function loadQuiz1() {
      fetch("quiz_1.html")
        .then(res => res.text())
        .then(html => {
          document.getElementById("quiz-container").innerHTML = html;
          initQuiz1(); // 삽입 후 실행
        });
    }

    function loadQuiz2() {
      fetch("quiz_2.html")
        .then(res => res.text())
        .then(html => {
          document.getElementById("quiz-container").innerHTML = html;
          initQuiz2(); // 삽입 후 실행
        });
    }

    window.loadQuiz1 = loadQuiz1;
    window.loadQuiz2 = loadQuiz2;
  </script>
</body>
</html>
